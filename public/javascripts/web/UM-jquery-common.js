(function(t){t.chartCache={},t.hashCache=[],window.uploadFileWait=!1,t.fn.extend({renderChart:function(e){var n={chart:{defaultSeriesType:"area",animation:!0,height:300},yAxis:{title:"",min:0},credits:{enabled:!1},plotOptions:{area:{stacking:null,fillColor:{linearGradient:[0,0,0,300],stops:[[0,"rgb(160, 192, 193)"],[1,"rgba(255,255,255,0)"]]},marker:{symbol:"circle",fillColor:"#FFFFFF",lineWidth:2,lineColor:null}},series:{animation:!0,events:{legendItemClick:function(){for(var t=this.name+"_<dot>",e=this.chart.series,n=e.length,i=0;n>i;i++)e[i].name==t&&(e[i].visible?e[i].hide():e[i].show())}}}},tooltip:{enabled:!0,formatter:function(){return""+this.x+"日"+this.series.name+" : "+this.y}},legend:{margin:25,enabled:!0},subtitle:{}},i=t.extend(!0,{},n,e||{});return this.each(function(){i.chart.renderTo=t(this).attr("id");try{t.chartCache(t(this).attr("id")).destroy()}catch(e){t.chartCache[t(this).attr("id")]=new Highcharts.Chart(i)}})},ajaxBlock:function(e){var n={message:"<img src='/imgs/xp/ajax-load.gif'/>",css:{width:"16px",border:"none",background:"none"},overlayCSS:{backgroundColor:"#FFF",opacity:.8},baseZ:997},i=t.extend(!0,{},n,e||{});return this.each(function(){t(this).block(i)})},timeFilterTab:function(e){var n={callback:null,selIndex:0,tabs:[{text:"今天",paramName:"period",paramVal:"today"},{text:"过去7天",paramName:"period",paramVal:"-7"},{text:"上周",paramName:"period",paramVal:"lastWeek"},{text:"上月",paramName:"period",paramVal:"lastMonth"},{text:"上季度",paramName:"period",paramVal:"lastQuarter"},{text:"自定义时间",paramName:"period",paramVal:"custom"}]};return e=t.extend(n,e||{}),this.each(function(){t(this).append(t("#time-filter-tmpl").tmpl(e,{getStatus:function(t){return t==this.data.selIndex?"sel":""}}));var n=t(this).find(".filter"),i=n.find("li:eq("+e.selIndex+")");n.find(".bg").animate({left:i.position().left+10,width:i.outerWidth()},500,"easeInOutCubic"),n.find("li").click(function(){if(t(this).addClass("sel").siblings("li").removeClass("sel"),n.find(".bg").animate({left:t(this).position().left+10,width:t(this).outerWidth()},500,"easeInOutCubic"),"custom"==t("a",this).attr("period")){var i=t(this).closest(".filter").find(".custom").slideDown(300);i.find(".from").datepicker({defaultDate:"+1w",dateFormat:"yy-mm-dd",dayNamesMin:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],numberOfMonths:2,onSelect:function(t){i.find(".to").datepicker("option","minDate",t)}}),i.find(".to").datepicker({defaultDate:"+1w",dateFormat:"yy-mm-dd",dayNamesMin:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],numberOfMonths:2,onSelect:function(t){i.find(".from").datepicker("option","maxDate",t)}}),i.find(".btn_small_green").unbind("click").click(function(){t(this).closest(".filter").find(".custom").slideUp(300),e.callback&&e.callback.call(this,e)})}else t(this).closest(".filter").find(".custom").slideUp(300),e.callback&&e.callback.call(this,e)})})},blockTab:function(e){var n={tabfors:t(".bodys"),callback:null,type:"normal",data:[]};return e=t.extend(n,e||{}),e.tabfors.data("opt",e),this.each(function(){t(this).find(".item").click(function(){"normal"==e.type&&t(this).closest(".sub_head").find(".bg").animate({left:t(this).position().left+167,width:t(this).width()},500,"easeInOutCubic"),t(this).addClass("sel").siblings(".item").removeClass("sel"),t.tabSlideTo(t(this),e),e.callback&&e.callback.apply(this,e.data)})})},checkBox:function(e){var n={type:"single",group:"closed",callback:null};return e=t.extend(n,e||{}),this.each(function(){function n(){var e=t(".sel",i).attr("group");t(".btn_checkbox",i).removeClass("disabled"),e&&t(".btn_checkbox:not([group="+e+"])").addClass("disabled")}var i=this;n(),t(".btn_checkbox",i).on("click",function(){t(this).hasClass("disabled")||("closed"==e.group?"single"==e.type?t(this).addClass("sel").closest(".check_box").find(".btn_checkbox").not(this).removeClass("sel"):"multi"==e.type?t(this).toggleClass("sel"):(t(this).toggleClass("sel"),t(this).hasClass("sel")&&t(this).siblings(".btn_checkbox").removeClass("sel")):(t(this).toggleClass("sel"),n()),t(t(i).attr("linkfor")).val(t(".sel",i).map(function(){return t(this).attr("val")}).get().join(",")).trigger("change"),t(t(i).attr("groupfor")).val(t(".sel",i).attr("group")).trigger("change"),e.callback&&e.callback.call(this,e))})})},selectList:function(e){var n={defaultVal:"请选择",callback:null,val:"",platform:"",className:"",id:"",list:[]};return e=t.extend(n,e||{}),this.each(function(){var n=this;t(this).attr("inputid")&&(e.id=t(this).attr("inputid")),t(this).html(t("#select-custom").tmpl(e)),t(this).find(".select_input").off("click").on("click",function(){t(this).next().slideToggle(300)}),t(this).find(".select_option li").off("click").on("click",function(){var i=t(t(n).find(".select_input").attr("linkfor"));i.val(t(this).attr("val")),t(n).find(".select_input .select_value").text(t(this).text()),t(this).closest(".select_option").slideUp(300),e.callback&&e.callback.call(this,e)})})},addOperateBtns:function(e){var n={list:".ad_item",callback:null};return e=t.extend(n,e||{}),this.each(function(){var n=t(t("#operate-btns").html());n.find(".btn_small_black").on("click",function(){e.callback&&e.callback.call(this,e)}),t(this).append(n)})},checkAll:function(){return this.each(function(){t(this).on("click",function(){t(t(this).attr("selectAll")).prop("checked",t(this).prop("checked"))})})},advanceSet:function(e){return this.each(function(){t(this).click(function(){t(this).toggleClass("expand");var n=t(t(this).attr("setfor"));n.is("tr,td")?n.is(":hidden")?(n.show(),n.find("td>div").slideDown(300)):n.find("td>div").slideUp(300,function(){n.hide()}):n.slideToggle(300),e&&e.call(this)})})},setPrior:function(e){var n=[{value:"最高",statusBar:"prior_bar_red",val:"5"},{value:"高",statusBar:"prior_bar_yellow",val:"4"},{value:"中",statusBar:"prior_bar_green",val:"3"},{value:"低",statusBar:"prior_bar_blue",val:"2"},{value:"最低",statusBar:"prior_bar_pink",val:"1"}];return this.each(function(){var i;t(this).on("click",function(r){r.stopPropagation();var a=this,s={getStatus:function(){return this.data.val==t(a).attr("val")?"sel":""}};i=t('<ul class="prior_set dn"></ul>').append(t("#prior-set").tmpl(n,s)),i.appendTo("body");var o=t(this).parent().offset().left+(t(this).parent().width()-i.width())/2,l=t(this).parent().offset().top;i.css({left:o,top:l}).slideDown(300),i.find("li").click(function(){t(this).addClass("sel").siblings("li").removeClass("sel"),e&&e.call(a,{val:t(this).attr("val"),value:t(".prior_text",this).text()}),t(this).closest(".prior_set").slideUp(300,function(){t(this).remove()})})})})},createAreaOpt:function(e){var n={callback:null,linkInput:t("#areas"),id:"",parentBody:t("body")};e=t.extend(n,e||{}),function(e){return this.each(function(){var n=this;e.id="sub_body_"+t.getToken(),e.parentBody.append(t("#sub-pop-area").tmpl(e));var i=t("#"+e.id);t(this).attr("area","#"+e.id),i.find("tr.tb_title").click(function(){t(this).nextUntil("tr.tb_title").find("input").prop("checked",t(this).find("input").prop("checked"))}),i.find("tr.area_list span.sub_title").click(function(){t(this).nextAll("input").prop("checked",t(this).find("input").prop("checked"))}),i.find(".region_cancel").click(function(){i.animate({right:-i.outerWidth()-10+"px"},500)}),i.find(".region_ok").click(function(){var r=i.find("tr.area_list td>:checkbox").map(function(e,n){return t(n).prop("checked")?t(n).prev("label").text():void 0}).get().join(",");37===r.split(",").length||0===r.length?t(n).find(".btn_checkbox.all").trigger("click"):(e.linkInput.val(r),t(n).find(".btn_checkbox.special").attr("val",r)),i.animate({right:-i.outerWidth()-10+"px"},500)}),t(this).find(".btn_checkbox.all").click(function(){e.linkInput.val("all")}),t(n).find(".btn_checkbox.special").click(function(){i.find(":checkbox").prop("checked",!1),"all"!==e.linkInput.val()?i.find("tr.area_list td>label").each(function(n,i){var r=e.linkInput.val();r.indexOf(t(i).text())>-1&&t(i).next("input").prop("checked",!0)}):i.find(":checkbox").prop("checked",!0),i.animate({right:"10px"},500)})})}.call(this,e)},pageNav:function(e){function n(t,n){var i,r,a="";i=n-e.viewCount,r=n+e.viewCount,1>i&&(r=r-i+1),r>t&&(i=i-r+t);for(var s=0;t>s;s++)0===s||s==t-1||s+1>=i&&r>=s+1?a+='<a class="'+(s+1==n?"current":"")+'" p="'+(s+1)+'">'+(s+1)+"</a>":s==t-2?a+=t-2>r?'<a class="dot" p="'+(s+1)+'">...</a>':'<a  p="'+(s+1)+'">'+(s+1)+"</a>":1==s&&(a+=i>3?'<a class="dot" p="'+(s+1)+'">...</a>':'<a  p="'+(s+1)+'">'+(s+1)+"</a>");return a}var i={ajaxUrl:"",totalPages:20,tmpl:null,viewCount:3,callback:null,pageFor:t(".table_body table tbody"),ajaxBlocker:t(".table_body"),current:1};return e=t.extend(i,e||{}),this.each(function(){var i=t('<div class="pagin">'),r=n(e.totalPages,e.current);i.append(r),i.find("a:not(.current)").click(function(){e.callback&&e.callback.call(this,e,n)}),t(this).html(i)})},tipImageShow:function(){return this.each(function(){var e,n,i,r=t(t(this).attr("show"));t(this).hover(function(){var a=new Image;a.src=t(this).attr("href"),a.width>350&&(a.height=350*a.height/a.width,a.width=350),i=t(window).width(),windowH=t(window).height(),n=t(this).offset().left+t(this).width(),e=t(this).offset().top+t(this).height(),0>t(this).attr("href").indexOf("baidu")?r.attr("src",t(this).attr("href")).width(a.width).height(a.height).show():r.attr("src",t(this).attr("href")+"&rnd="+Math.random()).width(a.width).height(a.height).show(),n-=i-t(this).offset().left+t(window).scrollLeft()<a.width?a.width:0,e-=windowH-t(this).offset().top+t(window).scrollTop()<a.height+20?a.height+25:0,r.css("left",n),r.css("top",e)},function(){r.hide().attr("src","")})})},umSlider:function(e){var n={init:function(e){var n={speed:10,step:1,auto:!1,leftBtn:null,direction:"left",rightBtn:null,stop:!1,pauseOnHover:!1,pagin:null,slideIndex:0};return e=t.extend(n,e||{}),this.each(function(){var n=this,i=t("li",this).outerHeight(),r=t("li",this).outerWidth();if(t(this).css({width:r+"px",height:i+"px",overflow:"hidden",position:"relative",zoom:1}),t("ul",this).css({width:r*t("li",this).length+"px",position:"absolute"}),t("li",this).css({"float":"left"}),e.auto){var a=function(){e.stop||(t(n).umSlider("left"==e.direction?"slideLeft":"slideRight",e),setTimeout(function(){a()},e.speed))};setTimeout(function(){a()},e.speed)}else e.leftBtn.click(function(){t(n).umSlider("slideRight",e)}),e.rightBtn.click(function(){t(n).umSlider("slideLeft",e)})})},slideLeft:function(e){e=e||{step:1};var n=t("li",this).outerWidth(),i=t("li",this).length;i-1>e.slideIndex?(++e.slideIndex,t("ul",this).animate({left:"-="+e.step*n},300,function(){e.pagin.children(".sel").removeClass("sel"),e.pagin.children().eq(e.slideIndex).addClass("sel")})):e.stop=!0},slideRight:function(e){e=e||{step:1};var n=t("li",this).outerWidth();e.slideIndex>0?(--e.slideIndex,t("ul",this).animate({left:"+="+e.step*n},300,function(){e.pagin.children(".sel").removeClass("sel"),e.pagin.children().eq(e.slideIndex).addClass("sel")})):e.stop=!0}};return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(t.error("Method "+e+" does not exist on jQuery.tooltip"),void 0):n.init.apply(this,arguments)}}),t.extend({getSearchParamVal:function(t,e){var n=RegExp(e+"="+"([^&]*)&?","i").exec(t);return n?n[1]:""},renderNormalChartOpt:function(t,e,n){t.renderChart({chart:{renderTo:t.attr("id")},title:"",xAxis:{categories:n,labels:{align:"right",step:parseInt(n.length/7)}},series:e})},getToken:function(){return Math.random().toString(16).substring(2)},tabSlideTo:function(e,n){var i=t(e.attr("tabfor")),r=n.tabfors.children(".tab_show").index(i);n.tabfors.children(".tab_show").removeClass("dn sel"),i.addClass("sel"),n.tabfors.animate({left:-1e3*r+"px"},500,"easeInOutCubic",function(){t.bodyAutoFit()})},bodyAutoFit:function(){var e=0,n=t(".bodys .body.sel"),i=n.find(".sub_body.sel");e=i.length>0?i.outerHeight()+40:n.outerHeight(),t(".bodys").animate({height:e+"px"},300,"easeOutCubic")},cookie_get:function(t){var e=document.cookie.split("; ");g=e.length,f=[];for(var n=0;g>n;n++)if(f=e[n].split("="),t===f[0])return unescape(f[1]);return null},cookie_set:function(t,e,n){var i=new Date;n?i.setDate(i.getDate()-10):i.setDate(i.getDate()+1),document.cookie=t+"="+escape(e)+"; expires="+i.toGMTString()+"; path=/"},popBox:function(e){var n={h_title:"test",body:"",animation:"slideFromTop",width:518,dialog_id:"dialog_"+t.getToken(),b_title:"",callback:null,closeHash:"",buttons:[{name:"ok",className:"",click:null}]};t.removePopBox(),e=t.extend(n,e||{}),t("body").append(t("#pop-box").tmpl(e)).css({overflowY:"hidden"});var i=t("#"+e.dialog_id).find(".pop_dialog");i.attr("route",e.closeHash),i.css({width:e.width+20+"px"}),t.each(e.buttons,function(n,r){var a=t('<button id="btn_'+n+'" class="btn_mid_green '+r.className+'">'+r.name+"</button>");"function"==typeof r.click&&a.on("click",r.click).data("opt",e).appendTo(i.find(".pop_dialog_foot .buttons"))}),t("#"+e.dialog_id).fadeIn(300,function(){i.css({top:-i.height()+"px"});var n;"function"==typeof e.callback&&e.callback(e),n=(t(window).height()-i.height())/2,"fade"==e.animation?i.css({top:(0>n?0:n)+"px"}).fadeIn(300):i.animate({top:(0>n?0:n)+"px"},300,function(){}),t("#"+e.dialog_id).find(".close").on("click",function(){t.closePopBox(t(this).closest(".pop_dialog"),e)})})},removePopBox:function(){t("body .mark").remove(),t("body").css({overflowY:"auto"})},closePopBox:function(e,n){function i(){t(this).closest(".mark").fadeOut(300).remove(),t("body").css({overflowY:"auto"})}location.hash=t.hashCache[t.hashCache.length-1],n&&"fade"==n.animation?e.fadeOut(300,function(){i.call(this)}):e.animate({top:-e.height()+"px"},300,function(){i.call(this)})},initHoverShow:function(e){t("dl.combine_val:not(.noshow)",e).hover(function(){t(this).stop().animate({top:"-45px"},500,"easeInOutCubic")},function(){t(this).stop().animate({top:"0"},500,"easeInOutCubic")}),t("td",e).hover(function(){t(".hover_show",this).stop().animate({right:"0"},500,"easeInOutCubic")},function(){t(".hover_show",this).stop().animate({right:"-100px"},500,"easeInOutCubic")})},alert:function(e,n){var i={h_title:"提示:",body:"",animation:"fade",width:240,dialog_id:"dialog_"+t.getToken(),b_title:"",callback:null,buttons:[{name:"关闭","class":"",click:function(){return t.closePopBox(t(this).closest(".pop_dialog"),{animation:"fade"}),!1}}]};i.body='<div style="background:white;line-height:30px;padding:10px;">'+e+"</div>",n=t.extend(i,n||{}),t.popBox(n)},confirm:function(e,n){var i={buttons:[{name:"确定","class":"",click:function(){var e=t(this).data("opt");return"function"==typeof e.sure&&e.sure.call(this,e),t.closePopBox(t(this).closest(".pop_dialog"),{animation:"fade"}),!0}},{name:"取消","class":"",click:function(){return t.closePopBox(t(this).closest(".pop_dialog"),{animation:"fade"}),!1}}]};n=t.extend(i,n||{}),t.alert(e,n)},pieInit:function(e){window.PIE&&9>~~t.browser.version&&e.find(".pie").each(function(){PIE.attach(this)})},upload:function(e,n,i,r,a,s){function o(){uploadFileWait=!0,t(a).removeAttr("novalidate");var s=t(a).attr("action");t(a+"_uploadType").val(n),t(a+"_fileObject").val(e.id),t(a+"_feedback").val(i),t(a+"_callback").val(r),t(a).attr("target","uploadFrame"),t(a).attr("action","/upload/uploadFile"),t(a)[0].submit(),t(a).attr("target","_self"),t(a).attr("action",s)}if(e&&t.verify_file(t(e))){if(t(e).parent().find("#loadingStatus").remove(),t(e).parent().after('<img id="loadingStatus" src="/imgs/xp/ajax-load.gif" width="20" height="20"/>'),s&&"-"!=s){var l=s.split("x");t(a+"_width").val(l[0]),t(a+"_height").val(l[1])}uploadFileWait?uploadFileHd=setInterval(function(){return uploadFileWait?!1:(o(),clearInterval(uploadFileHd),void 0)},200):o()}},verify_file:function(e,n){var i=RegExp(t(e).attr("rule"),"gi");if(i.test(e.val())){var r=!1;if(e[0].files)r=e[0].files[0].size/1024>parseInt(e.attr("filesize"));else try{var a=new ActiveXObject("Scripting.FileSystemObject");r=a.GetFile(e.val()).size/1024>parseInt(e.attr("filesize"))}catch(s){e.closest("td").next().html("<span class='err'>建议使用非ie内核浏览器</span>")}return r?(n||(e.closest("td").next().html("<span class='err'>文件不得大于"+e.attr("filesize")+"K</span>"),e.focus()),!1):(e.closest("td").next().find(".err").remove(),!0)}return n||e.closest("td").next().html("<span class='err'>"+t(e).attr("title")+"</span>"),e.focus(),!1}})})(jQuery);